class D{#w;#D;#M=!1;#h=0;#p=0;#$=Array(2400);constructor(h){this.#w=h.getContext("2d"),this.#w.fillStyle="black",this.#w.fillRect(0,0,640,480),this.#b(),setInterval(this.#q,500)}async#b(){this.#D=new Image,this.#D.src="img/Main.png",await new Promise((h,p)=>{this.#D.onload=(w)=>{h(w)},this.#D.onerror=(w)=>{console.log("Font loading err"),p(w)}})}#q=()=>{if(this.#M=!this.#M,this.#w.fillRect(this.#h*8,this.#p*16,8,16),this.printChar(this.#$[this.#h+this.#p*80]),this.#M)this.printChar(641)};printChar=(h)=>{if(1024<=h&&h<=1280)h-=256;if(h!=641);const p=h%16*8,w=(h/16&65535)*16;this.#w.drawImage(this.#D,p,w,8,16,this.#h*8,this.#p*16,8,16)};putChar=(h)=>{let p=h.key;switch(this.#w.fillRect(this.#h*8,this.#p*16,8,16),this.printChar(this.#$[this.#h+this.#p*80]),p){case"Enter":this.#h=0,this.#p++;break;case"Escape":this.#h=this.#p=0,this.#w.fillRect(0,0,640,480);break;case"Shift":case"Control":case"Alt":case"Tab":h.preventDefault();break;default:if(p.length<2)this.#$[this.#h+this.#p*80]=p,this.printChar(p.charCodeAt(0));else this.printChar(1);if(this.#h++,this.#h>=80)this.#h=0,this.#p++;if(this.#p>=30)this.#p=0}}}var M=document.getElementById("screen"),$=new D(M);window.onkeydown=(h)=>{$.putChar(h)};
